# STEP Protocol — 项目配置
# 根据项目实际情况修改

# 阶段 → Agent 路由（编排器参考此表派发子 agent）
# 删除某行 = 编排器自己处理该阶段
routing:
  discovery:    { agent: step-pm }
  prd:          { agent: step-pm }
  lite_spec:    { agent: step-pm, note: "Lite L1 Quick Spec，轻量需求确认" }
  tech_design:  { agent: step-architect }
  planning:     { agent: step-architect }
  scenario:     { agent: step-qa }
  test_writing: { agent: step-qa, note: "建议与 execution agent 不同，形成对抗性" }
  execution:    { agent: step-developer }
  review:       { agent: step-reviewer }

# Phase 4 文件模式路由（前端文件 → designer，其余 → developer）
# 编排器根据文件路径匹配 patterns，决定用哪个 agent
file_routing:
  frontend:
    agent: step-designer
    patterns: ["src/components/**", "**/*.tsx", "**/*.css", "**/*.vue"]
  backend:
    agent: step-developer
    patterns: ["src/api/**", "src/db/**", "src/lib/**"]

# Gate 命令（根据项目包管理器和工具链修改）
gate:
  lint: "pnpm lint --no-error-on-unmatched-pattern"
  typecheck: "pnpm tsc --noEmit"
  test: "pnpm vitest run"
  build: "pnpm build"
