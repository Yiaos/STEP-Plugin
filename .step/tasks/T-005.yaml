# T-005: 对比文档修正（F-8）
id: T-005
title: "对比文档修正 — STEP-vs-planning-with-files.md 遗忘处理描述"
status: planned
depends_on: [T-001, T-002]
goal: "修正对比文档中关于 STEP 不处理遗忘问题的错误描述"
non_goal:
  - "不重写整个对比文档"
  - "不修改其他对比文档（BMAD, OpenSpec, superpowers）"

done_when:
  - "bash tests/test-t005.sh"

scenarios:
  happy_path:
    - id: S-005-01
      given: "STEP-vs-planning-with-files.md 已更新"
      when: "搜索关于遗忘/注意力管理的段落"
      then: "描述已更新，反映 STEP 现在具备 PreToolUse 注入规则 + Stop hook 检查"
      test_file: "tests/test-t005.sh"
      test_name: "[S-005-01] 遗忘处理描述已修正"
      test_type: unit
      status: not_run

  edge_cases:
    - id: S-005-02
      given: "对比文档"
      when: "搜索 '不处理' 或 '缺少' 关于遗忘的表述"
      then: "不存在过时的否定表述"
      test_file: "tests/test-t005.sh"
      test_name: "[S-005-02] 无过时否定表述"
      test_type: unit
      status: not_run
    - id: S-005-03
      given: "对比文档 markdown 格式"
      when: "检查表格格式"
      then: "markdown 表格对齐，无语法错误"
      test_file: "tests/test-t005.sh"
      test_name: "[S-005-03] markdown 格式正确"
      test_type: unit
      status: not_run

  error_handling:
    - id: S-005-04
      given: "COMPARISON.md（综合对比）"
      when: "检查是否也需要同步更新"
      then: "如果 COMPARISON.md 也有过时描述，同步修正"
      test_file: "tests/test-t005.sh"
      test_name: "[S-005-04] COMPARISON.md 同步检查"
      test_type: integration
      status: not_run

  e2e:
    - id: S-005-05
      given: "所有对比文档"
      when: "全文搜索 'STEP.*不处理.*遗忘' 或类似表述"
      then: "无匹配项"
      test_file: "tests/test-t005.sh"
      test_name: "[S-005-05] 全局无过时遗忘描述"
      test_type: e2e
      status: not_run

coverage_requirements:
  happy_path: 1
  edge_cases: 2
  error_handling: 1
  e2e: 1

rollback: "git checkout -- comparisons/STEP-vs-planning-with-files.md COMPARISON.md"
